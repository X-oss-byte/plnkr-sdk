{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["const DEFAULT_EDITOR_URL = 'https://next.plnkr.co/edit/';\nconst DEFAULT_EMBED_URL = 'https://embed.plnkr.co';\n\nexport enum EncodingKind {\n    Utf8 = 'utf8',\n    Base64 = 'base64',\n}\n\nexport enum SidebarKind {\n    Preview = 'tree',\n    Config = 'config',\n}\n\nexport enum TargetKind {\n    Blank = '_blank',\n    Self = '_self',\n}\n\nexport type FileContent = string;\nexport type FileEncoding = EncodingKind;\nexport type FilePath = string;\n\nexport type PreviewIdentifier = 'preview';\n\nexport type ProjectTitle = string;\nexport type ProjectTag = string;\n\nexport interface FileSpecification {\n    pathname: FilePath;\n    content: FileContent;\n    encoding?: FileEncoding;\n}\n\nexport interface ProjectSpecification {\n    files: FileSpecification[];\n    title?: ProjectTitle;\n    tags?: ProjectTag[];\n}\n\nexport interface EditorProjectSpecification extends ProjectSpecification {}\n\nexport interface EmbedProjectSpecification extends ProjectSpecification {\n    source?: {\n        type: string;\n        url: string;\n    };\n}\n\nexport interface DynamicOptions {\n    parentEl?: string | HTMLElement;\n    preview?: FilePath;\n    show?: (FilePath | PreviewIdentifier)[];\n    sidebar?: SidebarKind;\n    target?: TargetKind;\n}\n\nexport interface DynamicEditorOptions extends DynamicOptions {\n    editorUrl?: string;\n}\n\nexport interface DynamicEmbedOptions extends DynamicOptions {\n    autoCloseSidebar?: boolean;\n    deferRun?: boolean;\n    embedUrl?: string;\n}\n\nfunction buildDynamicEditorQueryString(options: DynamicEditorOptions): string {\n    if (\n        options.show &&\n        (!Array.isArray(options.show) ||\n            !options.show.every(show => show && typeof show === 'string'))\n    )\n        throw new TypeError(\n            'options.show, if specified, must be an array containing a list of filename fragments and/or \"preview\"'\n        );\n\n    if (options.preview && typeof options.preview !== 'string')\n        throw new TypeError('options.preview, if specified, must be a string');\n\n    if (\n        options.sidebar &&\n        Object.values(SidebarKind).indexOf(options.sidebar) === -1\n    )\n        throw new TypeError(\n            `options.sidebar, if specified, must be one of the following values ${Object.values(\n                SidebarKind\n            ).join(', ')}`\n        );\n\n    const query = [];\n\n    if (options.preview) {\n        query.push(`preview=${encodeURIComponent(options.preview)}`);\n    }\n\n    if (options.show) {\n        query.push(`open=${options.show.map(encodeURIComponent).join(',')}`);\n    }\n\n    if (options.sidebar) {\n        query.push(`sidebar=${encodeURIComponent(options.sidebar)}`);\n    }\n\n    return query.length ? `?${query.join('&')}` : '';\n}\n\nfunction buildDynamicEmbedQueryString(options: DynamicEmbedOptions): string {\n    if (\n        options.show &&\n        (!Array.isArray(options.show) ||\n            !options.show.every(show => show && typeof show === 'string'))\n    )\n        throw new TypeError(\n            'options.show, if specified, must be an array containing a list of filename fragments and/or \"preview\"'\n        );\n\n    if (options.preview && typeof options.preview !== 'string')\n        throw new TypeError('options.preview, if specified, must be a string');\n\n    if (\n        options.sidebar &&\n        Object.values(SidebarKind).indexOf(options.sidebar) === -1\n    )\n        throw new TypeError(\n            `options.sidebar, if specified, must be one of the following values ${Object.values(\n                SidebarKind\n            ).join(', ')}`\n        );\n\n    const query = [];\n\n    if (options.autoCloseSidebar) {\n        query.push('autoCloseSidebar');\n    } else if (options.autoCloseSidebar === false) {\n        query.push('autoCloseSidebar=false');\n    }\n\n    if (options.deferRun) {\n        query.push('deferRun');\n    } else if (options.deferRun === false) {\n        query.push('deferRun=false');\n    }\n\n    if (options.preview) {\n        query.push(`preview=${encodeURIComponent(options.preview)}`);\n    }\n\n    if (options.show) {\n        query.push(`show=${options.show.map(encodeURIComponent).join(',')}`);\n    }\n\n    if (options.sidebar) {\n        query.push(`sidebar=${encodeURIComponent(options.sidebar)}`);\n    }\n\n    return query.length ? `?${query.join('&')}` : '';\n}\n\nfunction normalizeProject(\n    projectSpec: ProjectSpecification\n): ProjectSpecification {\n    if (!Array.isArray(projectSpec.files))\n        throw new TypeError('projectSpec.files must be an array');\n    if (!projectSpec.files.length)\n        throw new TypeError('projectSpec.files must have at least one file');\n    if (\n        projectSpec.tags &&\n        (!Array.isArray(projectSpec.tags) ||\n            !projectSpec.tags.every(tag => typeof tag === 'string'))\n    )\n        throw new TypeError(\n            'projectSpec.tags, if specified, must be an array of strings'\n        );\n\n    const files = projectSpec.files.map(validateProjectFile);\n    const uniquePathnames = new Set();\n    const tags = Array.from(new Set(projectSpec.tags || []));\n\n    for (const file of files) {\n        if (uniquePathnames.has(file.pathname)) {\n            throw new TypeError(\n                'projectSpec.files must not contain two files having equivalent pathnames'\n            );\n        }\n\n        uniquePathnames.add(file.pathname);\n    }\n\n    return {\n        files,\n        title: projectSpec.title || 'Untitled project',\n        tags,\n    };\n}\n\nfunction validateProjectFile(\n    projectFile: FileSpecification\n): FileSpecification {\n    if (typeof projectFile.pathname !== 'string')\n        throw new TypeError('projectSpec.files.pathname must be a string');\n    if (\n        projectFile.encoding &&\n        !(\n            projectFile.encoding === EncodingKind.Base64 ||\n            projectFile.encoding === EncodingKind.Utf8\n        )\n    )\n        throw new TypeError(\n            `projectSpec.files.pathname must be one of ${Object.values(\n                EncodingKind\n            ).join(', ')}`\n        );\n    if (typeof projectFile.content !== 'string')\n        throw new TypeError('projectSpec.files.content must be a string');\n\n    const pathname = projectFile.pathname\n        .split('/')\n        .filter(Boolean)\n        .join('/');\n\n    return {\n        pathname,\n        content: projectFile.content,\n        encoding: projectFile.encoding || EncodingKind.Utf8,\n    };\n}\n\nexport function showDynamicEditor(\n    projectSpec: EditorProjectSpecification,\n    options: DynamicEditorOptions = {}\n): void {\n    if (options.editorUrl && typeof options.editorUrl !== 'string')\n        throw new TypeError(\n            'options.editorUrl, if specified, must be a string'\n        );\n\n    if (\n        options.target &&\n        Object.values(TargetKind).indexOf(options.target) === -1\n    )\n        throw new TypeError(\n            `options.target, if specified, must be one of the following values ${Object.values(\n                TargetKind\n            ).join(', ')}`\n        );\n\n    if (\n        options.parentEl &&\n        !(\n            typeof options.parentEl === 'string' ||\n            options.parentEl instanceof HTMLElement\n        )\n    )\n        throw new TypeError(\n            'options.parentEl, if specified, must be a string or an instance of an HTMLElement'\n        );\n\n    if (options.parentEl && options.target)\n        throw new TypeError(\n            'options.parentEl is incompatible with options.target'\n        );\n\n    const projectDef = normalizeProject(projectSpec);\n    const query = buildDynamicEmbedQueryString(options);\n    const form = window.document.createElement('form');\n    const input = window.document.createElement('input');\n\n    form.style.display = 'none';\n    input.type = 'hidden';\n\n    const setArrayField = (path: string | string[], values: string[]) => {\n        if (typeof path === 'string') path = path.split('.');\n\n        path.push('');\n\n        values.forEach(function(value) {\n            setField(path, value);\n        });\n    };\n\n    const setField = (path: string | string[], value: string) => {\n        if (typeof path === 'string') path = path.split('.');\n\n        const name =\n            path.shift() + path.map(segment => '[' + segment + ']').join('');\n\n        input.name = name;\n        input.value = value;\n\n        form.appendChild(input.cloneNode());\n    };\n\n    setArrayField('tags', projectDef.tags);\n    setField('title', projectDef.title);\n\n    for (const file of projectDef.files) {\n        setField(['entries', file.pathname, 'content'], file.content);\n        setField(['entries', file.pathname, 'encoding'], file.encoding);\n    }\n\n    let target: string = options.target || '_blank';\n\n    if (options.parentEl) {\n        const containerEl =\n            typeof options.parentEl === 'string'\n                ? document.getElementById(options.parentEl)\n                : options.parentEl;\n\n        if (!(containerEl instanceof HTMLElement))\n            throw new Error(\n                `Unable to resolve ${options.parentEl} to an html element`\n            );\n\n        target = `plnkr-${Math.random()\n            .toString(36)\n            .slice(2)}`;\n\n        const iframe = document.createElement('iframe');\n\n        iframe.setAttribute('frameborder', '0');\n        iframe.setAttribute('height', '100%');\n        iframe.setAttribute('name', target);\n        iframe.setAttribute('scrolling', 'no');\n        iframe.setAttribute('width', '100%');\n\n        iframe.style.minHeight = '250px';\n        iframe.style.overflow = 'hidden';\n        iframe.style.width = '100%';\n\n        containerEl.appendChild(iframe);\n    }\n\n    const editorUrl = options.editorUrl\n        ? options.editorUrl.replace(/\\/$/, '')\n        : DEFAULT_EDITOR_URL;\n\n    form.action = `${editorUrl}/${query}`;\n    form.method = 'POST';\n    form.target = target;\n\n    document.body.appendChild(form);\n\n    form.submit();\n\n    document.body.removeChild(form);\n}\n\nexport function showDynamicEmbed(\n    projectSpec: EmbedProjectSpecification,\n    options: DynamicEmbedOptions = {}\n): void {\n    if (\n        typeof projectSpec.source === 'object' &&\n        (!projectSpec.source ||\n            typeof projectSpec.source.type !== 'string' ||\n            !projectSpec.source.type ||\n            typeof projectSpec.source.url !== 'string' ||\n            !projectSpec.source.url)\n    )\n        throw new TypeError(\n            'projectSpec.source, if specified, must be an object with non-empty values for the type and url properties'\n        );\n\n    if (options.embedUrl && typeof options.embedUrl !== 'string')\n        throw new TypeError('options.embedUrl, if specified, must be a string');\n\n    if (\n        options.target &&\n        Object.values(TargetKind).indexOf(options.target) === -1\n    )\n        throw new TypeError(\n            `options.target, if specified, must be one of the following values ${Object.values(\n                TargetKind\n            ).join(', ')}`\n        );\n\n    if (\n        options.parentEl &&\n        !(\n            typeof options.parentEl === 'string' ||\n            options.parentEl instanceof HTMLElement\n        )\n    )\n        throw new TypeError(\n            'options.parentEl, if specified, must be a string or an instance of an HTMLElement'\n        );\n\n    if (options.parentEl && options.target)\n        throw new TypeError(\n            'options.parentEl is incompatible with options.target'\n        );\n\n    const projectDef = normalizeProject(projectSpec);\n    const query = buildDynamicEmbedQueryString(options);\n    const form = window.document.createElement('form');\n    const input = window.document.createElement('input');\n\n    form.style.display = 'none';\n    input.type = 'hidden';\n\n    const setArrayField = (path: string | string[], values: string[]) => {\n        if (typeof path === 'string') path = path.split('.');\n\n        path.push('');\n\n        values.forEach(function(value) {\n            setField(path, value);\n        });\n    };\n\n    const setField = (path: string | string[], value: string) => {\n        if (typeof path === 'string') path = path.split('.');\n\n        const name =\n            path.shift() + path.map(segment => '[' + segment + ']').join('');\n\n        input.name = name;\n        input.value = value;\n\n        form.appendChild(input.cloneNode());\n    };\n\n    setArrayField('tags', projectDef.tags);\n    setField('title', projectDef.title);\n\n    for (const file of projectDef.files) {\n        setField(['entries', file.pathname, 'content'], file.content);\n        setField(['entries', file.pathname, 'encoding'], file.encoding);\n    }\n\n    if (projectSpec.source) {\n        setField('source.type', projectSpec.source.type);\n        setField('source.url', projectSpec.source.url);\n    }\n\n    let target: string = options.target || '_blank';\n\n    if (options.parentEl) {\n        const containerEl =\n            typeof options.parentEl === 'string'\n                ? document.getElementById(options.parentEl)\n                : options.parentEl;\n\n        if (!(containerEl instanceof HTMLElement))\n            throw new Error(\n                `Unable to resolve ${options.parentEl} to an html element`\n            );\n\n        target = `plnkr-${Math.random()\n            .toString(36)\n            .slice(2)}`;\n\n        const iframe = document.createElement('iframe');\n\n        iframe.setAttribute('frameborder', '0');\n        iframe.setAttribute('height', '100%');\n        iframe.setAttribute('name', target);\n        iframe.setAttribute('scrolling', 'no');\n        iframe.setAttribute('width', '100%');\n\n        iframe.style.minHeight = '250px';\n        iframe.style.overflow = 'hidden';\n        iframe.style.width = '100%';\n\n        containerEl.appendChild(iframe);\n    }\n\n    const embedUrl = options.embedUrl\n        ? options.embedUrl.replace(/\\/$/, '')\n        : DEFAULT_EMBED_URL;\n\n    form.action = `${embedUrl}/${query}`;\n    form.method = 'POST';\n    form.target = target;\n\n    document.body.appendChild(form);\n\n    form.submit();\n\n    document.body.removeChild(form);\n}\n"],"names":[],"mappings":"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"}